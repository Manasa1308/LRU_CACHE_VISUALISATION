<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LRU Cache Visualizer</title>

<style>
body{
    margin:0;
    font-family:Segoe UI, sans-serif;
    background:#0a0f1f;
    color:#e5e7eb;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

.app{
    width:950px;
    background:#11162a;
    border-radius:18px;
    padding:30px;
    box-shadow:0 25px 70px rgba(0,0,0,0.6);
}

h1{
    text-align:center;
    margin-bottom:25px;
    font-weight:600;
}

/* Controls */
.controls{
    display:flex;
    justify-content:center;
    gap:10px;
    margin-bottom:25px;
}

input{
    width:220px;
    padding:12px;
    border-radius:8px;
    border:none;
    background:#0a0f1f;
    color:white;
    outline:1px solid #2a335a;
}

button{
    padding:12px 18px;
    border:none;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
}

.put{background:#60a5fa;}
.get{background:#4ade80;}
.reset{background:#f87171;}

/* Layout */
.main{
    display:grid;
    grid-template-columns:2fr 1.2fr;
    gap:25px;
}

/* Cache */
.cache-wrapper{
    margin-top:10px;
}

.labels{
    display:flex;
    justify-content:space-between;
    font-size:14px;
    opacity:0.8;
}

.cache{
    display:grid;
    grid-template-columns:repeat(5, 1fr);
    gap:14px;
    margin-top:16px;
}

.block{
    height:70px;
    background:#0a0f1f;
    border:2px dashed #2a335a;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:22px;
    font-weight:600;
    transition:0.3s;
}

.hit{
    border-style:solid;
    border-color:#4ade80;
}

.evict{
    border-style:solid;
    border-color:#f87171;
}

/* Explanation Panel */
.explain{
    background:#0a0f1f;
    border-radius:14px;
    padding:18px;
    outline:1px solid #2a335a;
}

.explain h3{
    margin-top:0;
    margin-bottom:12px;
    font-size:18px;
}

.step{
    font-size:15px;
    line-height:1.6;
    color:#d1d5db;
}

.highlight{
    color:#60a5fa;
    font-weight:600;
}

/* Status */
.status{
    margin-top:18px;
    text-align:center;
    font-size:16px;
    opacity:0.9;
}
</style>
</head>

<body>

<div class="app">

<h1>LRU Cache Visualizer</h1>

<div class="controls">
    <input id="key" placeholder="Enter key">
    <button class="put" onclick="put()">PUT</button>
    <button class="get" onclick="get()">GET</button>
    <button class="reset" onclick="resetCache()">RESET</button>
</div>

<div class="main">

    <!-- Cache Area -->
    <div class="cache-wrapper">
        <div class="labels">
            <span>⬅ MRU</span>
            <span>LRU ➡</span>
        </div>
        <div class="cache" id="cache"></div>
        <div class="status" id="status">Cache Capacity = 5</div>
    </div>

    <!-- Explanation -->
    <div class="explain">
        <h3>What’s happening?</h3>
        <div class="step" id="explainText">
            Waiting for operation...
        </div>
    </div>

</div>

</div>

<script>
const CAPACITY = 5;
let cache = [];

function render(hit=null, evict=null){
    const c = document.getElementById("cache");
    c.innerHTML="";
    for(let i=0;i<CAPACITY;i++){
        const b=document.createElement("div");
        b.className="block";
        if(cache[i]){
            b.innerText=cache[i];
            if(cache[i]===hit) b.classList.add("hit");
            if(cache[i]===evict) b.classList.add("evict");
        }
        c.appendChild(b);
    }
}

function clearInput(){
    document.getElementById("key").value="";
}

function put(){
    const key=document.getElementById("key").value.trim();
    if(!key) return;

    const idx=cache.indexOf(key);

    if(idx!==-1){
        cache.splice(idx,1);
        cache.unshift(key);
        setExplain(`
            Key <span class="highlight">${key}</span> already exists in cache.<br>
            This is a <b>Cache Hit</b>.<br>
            Moved <span class="highlight">${key}</span> to <b>Most Recently Used (MRU)</b>.
        `);
        render(key);
    }else{
        if(cache.length===CAPACITY){
            const evicted=cache.pop();
            cache.unshift(key);
            setExplain(`
                Cache is full.<br>
                <b>Least Recently Used</b> key <span class="highlight">${evicted}</span> is removed.<br>
                Inserted <span class="highlight">${key}</span> at MRU position.
            `);
            render(null, evicted);
        }else{
            cache.unshift(key);
            setExplain(`
                Cache has space available.<br>
                Inserted <span class="highlight">${key}</span> at <b>MRU</b>.
            `);
            render();
        }
    }
    setStatus(`PUT operation on ${key}`);
    clearInput();
}

function get(){
    const key=document.getElementById("key").value.trim();
    const idx=cache.indexOf(key);

    if(idx===-1){
        setExplain(`
            Key <span class="highlight">${key}</span> not found.<br>
            This is a <b>Cache Miss</b>.
        `);
        setStatus(`GET operation on ${key}`);
        clearInput();
        return;
    }

    cache.splice(idx,1);
    cache.unshift(key);
    setExplain(`
        Key <span class="highlight">${key}</span> found in cache.<br>
        This is a <b>Cache Hit</b>.<br>
        Moved to <b>MRU</b>.
    `);
    render(key);
    setStatus(`GET operation on ${key}`);
    clearInput();
}

function resetCache(){
    cache=[];
    render();
    setExplain("Cache cleared. All entries removed.");
    setStatus("Cache Reset");
}

function setStatus(msg){
    document.getElementById("status").innerText=msg;
}

function setExplain(msg){
    document.getElementById("explainText").innerHTML=msg;
}

render();
</script>

</body>
</html>
